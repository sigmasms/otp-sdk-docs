<!-- Do not edit this file. It is automatically generated by API Documenter. -->

[Home](./index.md) &gt; [@sigmamessaging/otp-sdk](./otp-sdk.md) &gt; [SigmaOtpSDK](./otp-sdk.sigmaotpsdk.md)

## SigmaOtpSDK class

> This API is provided as a beta preview for developers and may change based on feedback that we receive. Do not use this API in a production environment.
> 

Основной класс SDK

**Signature:**

```typescript
export declare class SigmaOtpSDK 
```

## Example 1

Инициализация SDK

```typescript
import { SigmaOtpSDK, SigmaOtpSDKEnvironmentEnum } from '@sigma-otp-sdk';

// Создание экземпляра SDK
const client = new SigmaOtpSDK({
  environment: SigmaOtpSDKEnvironmentEnum.production,
  apiToken: "your_api_token",
  apiUrl: "https://api.example.com",
  // Опционально: настройки логгера
  logger: {
    debug: (message, ...params) => console.debug(message, ...params),
    error: (message, ...params) => console.error(message, ...params)
  }
});
```

## Example 2

Запуск аутентификации и получение канала

```typescript
try {
  // Запуск процесса аутентификации
  const { requestId } = await client.send(
    'widget_id',
    '+79001234567',
    '192.168.1.1' // IP пользователя
  );

  // Получение информации о текущем канале
  const channel = await client.getChannel(requestId);

  console.log(`Канал аутентификации: ${channel.type}, статус: ${channel.status}`);
  console.log(`Осталось попыток: ${channel.remainingCodeAttempts}`);
} catch (error) {
  console.error('Ошибка при запуске аутентификации:', error);
}
```
\*

## Example 3

Завершение процесса аутентификации и подписка на события

```typescript
// Подписка на событие успешного подтверждения
const subscription = client.onSuccessConfirmation(requestId, ({ requestId }) => {
  console.log(`Аутентификация успешно завершена для запроса ${requestId}`);
});

// Проверка статуса и завершение процесса
try {
  const status = await client.checkStatusAndComplete(requestId, '+79001234567');

  if (status.success) {
    console.log('Аутентификация успешно завершена');
  } else {
    console.log('Аутентификация не завершена');
  }

  // Отписка от события, когда оно больше не нужно
  subscription.unsubscribe();
} catch (error) {
  console.error('Ошибка при проверке статуса:', error);
}
```

## Constructors

<table><thead><tr><th>

Constructor


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[(constructor)(settings)](./otp-sdk.sigmaotpsdk._constructor_.md)


</td><td>


</td><td>

**_(BETA)_** Constructs a new instance of the `SigmaOtpSDK` class


</td></tr>
</tbody></table>

## Methods

<table><thead><tr><th>

Method


</th><th>

Modifiers


</th><th>

Description


</th></tr></thead>
<tbody><tr><td>

[checkStatus(requestId, recipient)](./otp-sdk.sigmaotpsdk.checkstatus.md)


</td><td>


</td><td>

**_(BETA)_** Возвращает статус процесса аутентификации


</td></tr>
<tr><td>

[checkStatusAndComplete(requestId, recipient)](./otp-sdk.sigmaotpsdk.checkstatusandcomplete.md)


</td><td>


</td><td>

**_(BETA)_** Проверяет статус процесса аутентификации и завершает его в случае успеха.


</td></tr>
<tr><td>

[complete(requestId, recipient)](./otp-sdk.sigmaotpsdk.complete.md)


</td><td>


</td><td>

**_(BETA)_** Проверяет статус процесса аутентификации и завершает его в случае успеха.


</td></tr>
<tr><td>

[getChannel(requestId)](./otp-sdk.sigmaotpsdk.getchannel.md)


</td><td>


</td><td>

**_(BETA)_** Возвращает текущий канал


</td></tr>
<tr><td>

[getWidgetData(widgetId, userIp)](./otp-sdk.sigmaotpsdk.getwidgetdata.md)


</td><td>


</td><td>

**_(BETA)_** Возвращает данные виджета


</td></tr>
<tr><td>

[onChannelChanged(requestId, handler)](./otp-sdk.sigmaotpsdk.onchannelchanged.md)


</td><td>


</td><td>

**_(BETA)_** Подписывается на событие [Exceptions.ChannelChangedException](./otp-sdk.exceptions.channelchangedexception.md)


</td></tr>
<tr><td>

[onError(requestId, handler)](./otp-sdk.sigmaotpsdk.onerror.md)


</td><td>


</td><td>

**_(BETA)_** Подписывается на событие ошибки


</td></tr>
<tr><td>

[onResendChannel(requestId, handler)](./otp-sdk.sigmaotpsdk.onresendchannel.md)


</td><td>


</td><td>

**_(BETA)_** Подписывается на событие [Exceptions.ResendChannelException](./otp-sdk.exceptions.resendchannelexception.md)


</td></tr>
<tr><td>

[onSuccessConfirmation(requestId, handler)](./otp-sdk.sigmaotpsdk.onsuccessconfirmation.md)


</td><td>


</td><td>

**_(BETA)_** Подписывается на событие успешного подтверждения


</td></tr>
<tr><td>

[resend(requestId)](./otp-sdk.sigmaotpsdk.resend.md)


</td><td>


</td><td>

**_(BETA)_** Перезапуск текущего или запуск нового канала


</td></tr>
<tr><td>

[send(widgetId, recipient, userIp, captchaToken)](./otp-sdk.sigmaotpsdk.send.md)


</td><td>


</td><td>

**_(BETA)_** Запускает процесс аутентификации


</td></tr>
<tr><td>

[setApiToken(apiToken)](./otp-sdk.sigmaotpsdk.setapitoken.md)


</td><td>


</td><td>

**_(BETA)_** Позволяет поменять apiToken во время работы


</td></tr>
<tr><td>

[verifyCode(requestId, code)](./otp-sdk.sigmaotpsdk.verifycode.md)


</td><td>


</td><td>

**_(BETA)_** Проверяет код


</td></tr>
<tr><td>

[waitForChannelSelected(requestId)](./otp-sdk.sigmaotpsdk.waitforchannelselected.md)


</td><td>


</td><td>

**_(BETA)_** Возвращает текущий канал после смены статуса на [EOtpHandlerChannelStatus.sent](./otp-sdk.eotphandlerchannelstatus.md)


</td></tr>
<tr><td>

[waitForSuccessStatus(requestId, recipient)](./otp-sdk.sigmaotpsdk.waitforsuccessstatus.md)


</td><td>


</td><td>

**_(BETA)_** Ожидает успешный статус процесса аутентификации


</td></tr>
</tbody></table>

